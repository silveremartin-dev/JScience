# JScience Server Configuration
# ==============================

# Server Configuration
# --------------------
server.grpc.port=50051
server.grpc.host=0.0.0.0
server.rest.port=8080
server.rest.enabled=true
server.rest.threads=10

# Security Configuration
# ----------------------
# IMPORTANT: Override these in production with strong values via environment variables
# JWT_SECRET environment variable is required for production
security.jwt.secret=${JWT_SECRET:CHANGE_ME_IN_PRODUCTION}
security.jwt.expiration.ms=86400000
security.oidc.enabled=true

# Admin User Configuration
# -------------------------
# Set via environment variables: JSCIENCE_ADMIN_USER and JSCIENCE_ADMIN_PASSWORD
# Password must be 12+ characters and not use default values

# Database Configuration
# ----------------------
database.dir=${DATA_DIR:./data}
database.jobs.url=jdbc:h2:${database.dir}/jobs
database.users.url=jdbc:h2:${database.dir}/users
database.h2.trace=false

# External Services
# -----------------
# MLflow Tracking Server
mlflow.tracking.uri=${MLFLOW_TRACKING_URI:http://localhost:5000}
mlflow.experiment.name=${MLFLOW_EXPERIMENT:JScience}
mlflow.enabled=true

# World Bank API
worldbank.api.url=https://api.worldbank.org/v2
worldbank.cache.enabled=true
worldbank.cache.ttl.hours=24

# HTTP Client Configuration
# --------------------------
http.client.connect.timeout.ms=10000
http.client.request.timeout.ms=5000
http.client.max.connections=50
http.client.connection.pool.enabled=true

# Task Scheduling Configuration
# ------------------------------
scheduling.max.retries=3
scheduling.retry.base.delay.ms=1000
scheduling.aging.interval.ms=60000
scheduling.starvation.threshold.ms=300000

# Thread Pool Configuration
# --------------------------
executor.rest.gateway.threads=10
executor.task.processing.threads=20
executor.mlflow.threads=5

# Service Discovery (mDNS)
# -------------------------
discovery.mdns.enabled=true
discovery.mdns.service.type=_jscience._tcp.local.
discovery.mdns.service.name=JScience Server

# Logging Configuration
# ----------------------
logging.level.root=INFO
logging.level.org.jscience=DEBUG
logging.pattern=%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n

# Performance Tuning
# ------------------
performance.circuit.breaker.enabled=true
performance.circuit.breaker.failure.threshold=5
performance.circuit.breaker.timeout.ms=60000
performance.rate.limiting.enabled=false

# Feature Flags
# -------------
features.caching.enabled=true
features.metrics.enabled=false
features.tracing.enabled=false
